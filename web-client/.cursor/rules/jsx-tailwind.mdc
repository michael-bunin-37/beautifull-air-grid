---
name: jsx-tailwind
description: >
  Rules for JSX structure, Tailwind CSS class ordering, cn() usage, semantic colors, icons, and class optimization.
---

# JSX & Tailwind CSS Rules

> **Theme reference:** Always check `@src/styles/globals.css` for available semantic colors, typography tokens, and breakpoints before writing styles.

## 1. Tailwind Class Order

Group classes in this logical order. Within `className=""` keep on one line; within `cn()` split into string arguments per group.

```
layout → position → sizing → spacing → typography → colors → borders → effects → states
```

| Group      | Examples                                                         |
| ---------- | ---------------------------------------------------------------- |
| Layout     | `flex`, `grid`, `inline-flex`, `block`, `hidden`                 |
| Position   | `relative`, `absolute`, `sticky`, `top-0`, `z-10`                |
| Sizing     | `size-10`, `w-full`, `h-screen`, `max-w-screen-lg`               |
| Spacing    | `p-4`, `mx-auto`, `gap-6`, `space-y-4`                           |
| Typography | `text-sm`, `font-semibold`, `leading-tight`, `text-balance`      |
| Colors     | `bg-background`, `text-foreground`, `border-border`              |
| Borders    | `border`, `border-t`, `rounded-lg`                               |
| Effects    | `shadow-xs`, `opacity-50`, `transition-colors`                   |
| States     | `hover:bg-accent`, `focus-visible:ring-2`, `disabled:opacity-50` |

Responsive (`sm:`, `md:`, `lg:`) go **next to** the base property they modify:

```tsx
// ✅ Good: responsive near base property
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-4">

// ❌ Bad: responsive grouped at end
<div className="grid grid-cols-1 gap-6 p-4 md:grid-cols-2 lg:grid-cols-3">
```

## 2. Using cn()

Import: `import {cn} from "@/shared/helpers/shadcn-ui"`

**Use cn() when:** merging with external `className` prop, conditional classes, combining `cva()` variants, 3+ sources of classes.

**Skip cn() when:** static class strings with no conditions and no external `className`.

```tsx
// ✅ Good: conditional + external className
<div className={cn(
  "flex items-center gap-4 p-4",
  "text-sm font-medium text-foreground",
  isActive && "bg-primary-subtle border-primary-subtle-stroke",
  className,
)}>

// ✅ Good: static string, no conditions — plain className
<p className="text-sm font-medium text-muted-foreground">

// ❌ Bad: cn() for purely static classes without className prop
<p className={cn("text-sm font-medium text-muted-foreground")}>
```

When `cn()` has many arguments, split by logical group — one string per line. Do NOT add comments between class groups:

```tsx
// ✅ Good: split by logical groups, no inline comments
className={cn(
  "flex items-center size-10",
  "text-sm font-medium text-foreground",
  "hover:bg-accent transition-colors",
  isDisabled && "opacity-50 pointer-events-none",
  className,
)}

// ❌ Bad: comments between class groups
className={cn(
  // layout + sizing
  "flex items-center size-10",
  // typography + colors
  "text-sm font-medium text-foreground",
  className,
)}
```

## 3. Semantic Colors

> **Source of truth:** `@src/styles/globals.css` — contains all semantic tokens with automatic dark mode switching via `.dark` class.

**Always prefer semantic tokens.** They auto-switch in dark mode without explicit `dark:` classes.

| Use                     | Instead of                                   |
| ----------------------- | -------------------------------------------- |
| `bg-background`         | `bg-white dark:bg-neutral-900`               |
| `text-foreground`       | `text-neutral-900 dark:text-neutral-50`      |
| `bg-primary`            | `bg-amber-400`                               |
| `text-muted-foreground` | `text-neutral-500`                           |
| `border-border`         | `border-neutral-200 dark:border-neutral-700` |

Semantic groups: `background`, `foreground`, `primary`, `secondary`, `muted`, `accent`, `subtle`, `popover`, `error`, `success`, `warning`, `info`, `border`. Each may have: base, `-foreground`, `-subtle`, `-subtle-foreground`, `-subtle-stroke`.

```tsx
// ✅ Good: semantic — auto dark mode
<div className="bg-background text-foreground border-border">

// ❌ Bad: raw colors + explicit dark mode
<div className="bg-white text-neutral-900 border-neutral-200 dark:bg-neutral-900 dark:text-neutral-50 dark:border-neutral-700">
```

**Raw colors** (e.g. `bg-amber-400`, `text-neutral-500`) only in rare unique cases where no semantic token fits.

## 4. Icons

All icons come from `react-icons` library. Primary set: `react-icons/lu` (Lucide).

**Size via `size` attribute, NOT className:**

```tsx
// ✅ Good
<LuHome size={16} />
<LuSearch size={20} />

// ❌ Bad: className for sizing
<LuHome className="size-4" />
<LuSearch className="h-5 w-5" />
```

Color and other styles via `className`: `<LuAlertCircle size={16} className="text-error" />`

## 5. Class Optimization

### size-{value} shorthand

When width equals height, **always** use `size-{value}` instead of separate `h-{value} w-{value}`:

```tsx
// ✅ Good
<div className="size-10 rounded-full bg-accent" />

// ❌ Bad
<div className="h-10 w-10 rounded-full bg-accent" />
```

### Avoid arbitrary values

Prefer standard utility classes over arbitrary values in brackets:

```tsx
// ✅ Good
<div className="w-64 p-4 gap-6">

// ❌ Bad
<div className="w-[256px] p-[16px] gap-[24px]">
```

If arbitrary values already exist in code — **keep them as-is** unless refactoring is requested.

### Remove empty/unused classes

Never leave empty className strings:

```tsx
// ❌ Bad
<Button className="" variant="primary">

// ✅ Good
<Button variant="primary">
```

## 6. JSX Structure

### Conditional rendering inside return

Use inline conditions, **not** early returns for conditional UI blocks:

```tsx
// ✅ Good: inline condition
return (
	<div className="space-y-4">
		<Header />
		{isLoading && <Skeleton />}
		{!isLoading && data && <Content data={data} />}
		{error && <ErrorMessage error={error} />}
	</div>
)

// ❌ Bad: early return
if (isLoading) return <Skeleton />
if (error) return <ErrorMessage error={error} />
return <Content data={data} />
```

### Comments

Add `{/* Section name */}` for grid/flex structures with multiple logical sections. Comment non-obvious values (z-index, negative margins, magic numbers):

```tsx
;<div className="grid grid-cols-12 gap-6">
	{/* Left column — main content */}
	<div className="col-span-12 lg:col-span-8 space-y-4">...</div>
	{/* Right column — sidebar */}
	<div className="col-span-12 lg:col-span-4">...</div>
</div>

{
	/* -mx-3 compensates parent padding for full-bleed nav */
}
;<Nav className="-mx-3" />
```

### Attribute ordering

`key → ref → className → event handlers → data/aria attributes → {...rest}`

## 7. cva() Variants

Use `cva()` **only** for reusable UI components in `shared/ui/` (Button, Badge, Input, etc.).

For feature/entity components prefer `cn()` with conditional classes.

```tsx
// ✅ Good: cva() in shared/ui/badge.tsx
const badgeVariants = cva("inline-flex items-center rounded-md px-2 py-0.5 text-xs font-medium", {
	variants: {
		variant: {
			default: "bg-secondary text-secondary-foreground",
			success:
				"bg-success-subtle text-success-subtle-foreground border border-success-subtle-stroke",
			error: "bg-error-subtle text-error-subtle-foreground border border-error-subtle-stroke",
		},
	},
	defaultVariants: {variant: "default"},
})

// ❌ Bad: cva() in a feature component
// features/deal-card/ui/deal-card.tsx — use cn() instead
```

## Quick Reference

```
cn()        → conditional classes, className merge, complex combos
cva()       → shared/ui reusable variants only
size={n}    → icon sizing (react-icons)
size-{n}    → equal width+height for HTML elements
Semantic    → bg-background, text-foreground (check globals.css)
No dark:    → semantic vars handle dark mode automatically
Responsive  → place sm:/md:/lg: next to base property
Comments    → JSX sections only; never inside cn()
```
